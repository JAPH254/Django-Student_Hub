{% extends 'base.html' %} {% block content %}
<div class="container mt-1">
  <div class="row justify-content-center">
    <div class="col-md-15">
      <h2 class="text-center mb-4 text-white">Book Search</h2>
      <span class="text-primary">Simply search your book by the author</span
      ><br />
      <form method="get">
        <div class="input-group mb-3" aria-placeholder="here">
          {{ filter.form.author }}
          <div class="input-group-append">
            <button class="btn btn-primary" type="submit">Search</button>
          </div>
        </div>
        <a href="{% url 'filterbyISBN' %}">Filter by ISBN</a>
      </form>

      {% if book_filter %}
      <table
        class="table table-striped table-dark table-hover table-bordered"
        style="padding: 20px"
      >
        <thead>
          <tr>
            <th>Title</th>
            <th>Author</th>
            <th>ISBN</th>
            <th>Availability</th>
            <th>Download</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for book in book_filter %}
          <tr>
            <td>{{ book.title }}</td>
            <td>{{ book.author }}</td>
            <td>{{ book.ISBN }}</td>
            <td>{{ book.available|default:"N/A" }}</td>
            {% if book.available %}
            <td>
              <a href="{{ book.file.url|default:'#' }}" download
                >{{ book.file.name|default:"No file available" }}</a
              >
            </td>
            {% else %}
            <td>Currently unavailable</td>
            {% endif %}
            <td><a href="" class="btn btn-primary">Collect</a></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p class="text-center text-warning mt-4">No data</p>
      {% endif %}

      <a href="{% url 'library' %}" class="btn btn-secondary mt-3"
        >Back to Library</a
      >
    </div>
  </div>
</div>

<!-- Bootstrap JS and dependencies -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
{% endblock %}
